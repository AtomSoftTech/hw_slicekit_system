Slice Cards
===========

Summary
-------

Slicekit Slice Cards are used to implement peripheral circuitry as part of the Slicekit modular hardware platform.

There are four types of Slice Card, ``Star``, ``Triangle``, ``Square`` and ``Circle``. These only differ in the number of xCore Processor IO signals available to the Slice Card.

``Star`` and ``Square`` Slice Cards have 20 xCore Processor IOs including four 1-bit ports.

``Triangle`` Slice Cards have 24 xCore Processor IOs including twelve 1-bit ports.

``Circle`` Slice Cards have 20 xCore Processor IOs including twelve 1-bit ports.

``Star`` and ``Square`` slices are a subset of ``Triangle`` and ``Circle`` slices so a ``Star``/``Square`` Slice Card can be plugged into a ``Triangle``/``Circle`` Slot (see notes later for exceptions).

A Double Slice Card is a board with two Slice Card finger connectors and connects to all of the IO on one Tile.

Power
-----

Slice Cards have two power supplies available to them, 5V and 3V3.
The 5V supply can range from 4.75V to 5.25V (5\%) at a current of up to 0.25A per slice.
The 3V3 supply can range from 3.13V to 3.47V (5\%) at a current of up to 0.25A per slice.

Signal IO
---------

A single Slice Card connector has 36 contacts. The four types of slice have a number of common pins which are described below.

- GND. Power supply ground.
- 5V. 5V power supply input.
- 3V3. 3.3V power supply input.
- NC. Not connected.
- CLK. System clock input. 25MHz.
- RST_N. System reset input, active low. Push-Pull drive.

The other available pins are connected to xCore Processor IOs as shown in the pinout tables.

Slice Cards can take their power from either 5V or 3V3 or both. Slice Cards should draw no more than 250mA from each supply.

At system power-on, the 5V supply will power up first, followed by the 3V3 supply. The system reset signal will de-assert a short time after this.

Due to the constraints on the Slicekit Core Board, there are some ports on the Slice Cards which should be used in preference to others. These constraints are as follows:

- X0D4-7 can be selected for use as the XScope XMOS Link
- X1D40-43 are not available on the L2
- X0D0,1,10,11 could be used for SPI boot on a master core board. These pins will be hi-z when booting and can be transfered to the XCore IO signals when boot is complete.

For Slice Cards intended for use in the ``Star`` Slot, P4B should be avoided with the knowledge that using it means XScope can not be used if the Slice Card is plugged into the ``Star`` Slot.

Slice Card Form Factors
-----------------------

The Slice Cards use a standard PCIe x1 edge finger to connect to the Slicekit Core Board. Because of this, all Slice Card PCBs must be 1.6mm thick.

There is no hard specification as to the length of Slice Cards as this poses no mechanical clashing hazard, however to avoid clashing with other Slice Cards or the power input connector Slice Cards should be limited to 40mm wide.

Four mounting holes are specified in the corners of the slice for mechanical stability. These should be used with 6mm standoffs, example part Toby Electronics DCB-6.

An optional retention hole is specified for use in securing the Slice Card to the Slicekit Core Board. This is useful to ensure the Slice Cards is not accidentally unplugged when using the system. 
Typical usage uses a 2.54mm cable tie between this hole and the associated hole in the Slicekit Core Board ensuring the Slice Card cannot be unplugged.

.. image:: images/slicecarddetail.svg

Note that for quick, low cost boards using low cost PCB manufacturing, the chamfer is not required and can be generated by hand using a file or similar.

Connector Pinouts
-----------------

The pinouts of the four types of Slice Card are shown below.

STAR                  
++++
+-----+--------+--------+
| PIN | SIDE B | SIDE A |
+=====+========+========+
| 1   | NC     | NC     |
+-----+--------+--------+
| 2   | NC     |*5V*    |
+-----+--------+--------+
| 3   |*GND*   | NC     |
+-----+--------+--------+
| 4   | NC     | NC     |
+-----+--------+--------+
| 5   |*3V3*   |*GND*   |
+-----+--------+--------+
| 6   | X0D2   | X0D8   |
+-----+--------+--------+
| 7   | X0D3   | X0D9   |
+-----+--------+--------+
| 8   |*GND*   | X0D1   |
+-----+--------+--------+
| 9   | X0D4   | X0D6   |
+-----+--------+--------+
| 10  | X0D10  |*GND*   |
+-----+--------+--------+
| 11  | X0D3   | X0D7   |
+-----+--------+--------+
|**MECHANICAL KEY**     |
+-----+--------+--------+
| 12  | X0D14  | X0D20  |
+-----+--------+--------+
| 13  | X0D15  | X0D21  |
+-----+--------+--------+
| 14  |*CLK*   |*GND*   |
+-----+--------+--------+
| 15  | X0D22  | X0D13  |
+-----+--------+--------+
| 16  |*GND*   |*RST_N* |
+-----+--------+--------+
| 17  | X0D16  | X0D18  |
+-----+--------+--------+
| 18  | X0D17  | X0D19  |
+-----+--------+--------+

SQUARE                
++++++
+-----+--------+--------+
| PIN | SIDE B | SIDE A |
+=====+========+========+
| 1   |*DEBUG* |*MSEL*  |
+-----+--------+--------+
| 2   |*TCK*   |*5V*    |
+-----+--------+--------+
| 3   |*GND*   |*TMS*   |
+-----+--------+--------+
| 4   |*TDI*   |*TDO*   |
+-----+--------+--------+
| 5   |*3V3*   |*PRSNT* |
+-----+--------+--------+
| 6   | X1D2   | X1D8   |
+-----+--------+--------+
| 7   | X1D3   | X1D9   |
+-----+--------+--------+
| 8   |*GND*   | X1D1   |
+-----+--------+--------+
| 9   | X1D4   | X1D6   |
+-----+--------+--------+
| 10  | X1D10  |*GND*   |
+-----+--------+--------+
| 11  | X1D3   | X1D7   |
+-----+--------+--------+
|**MECHANICAL KEY**     |
+-----+--------+--------+
| 12  | X1D14  | X1D20  |
+-----+--------+--------+
| 13  | X1D15  | X1D21  |
+-----+--------+--------+
| 14  |*CLK*   |*GND*   |
+-----+--------+--------+
| 15  | X1D22  | X1D13  |
+-----+--------+--------+
| 16  |*GND*   |*RST_N* |
+-----+--------+--------+
| 17  | X1D16  | X1D18  |
+-----+--------+--------+
| 18  | X1D17  | X1D19  |
+-----+--------+--------+

TRIANGLE              
++++++++
+-----+--------+--------+
| PIN | SIDE B | SIDE A |
+=====+========+========+
| B1  | NC     | NC     |
+-----+--------+--------+
| B2  | X0D0   |*5V*    |
+-----+--------+--------+
| B3  |*GND*   | X0D12  |
+-----+--------+--------+
| B4  | X0D11  | X0D23  |
+-----+--------+--------+
| B5  |*3V3*   |*GND*   |
+-----+--------+--------+
| B6  | X0D26  | X0D32  |
+-----+--------+--------+
| B7  | X0D27  | X0D33  |
+-----+--------+--------+
| B8  |*GND*   | X0D25  |
+-----+--------+--------+
| B9  | X0D28  | X0D30  |
+-----+--------+--------+
| B10 | X0D34  |*GND*   |
+-----+--------+--------+
| B11 | X0D29  | X0D31  |
+-----+--------+--------+
|**MECHANICAL KEY**     |
+-----+--------+--------+
| B12 | X0D36  | X0D42  |
+-----+--------+--------+
| B13 | X0D37  | X0D43  |
+-----+--------+--------+
| B14 |*CLK*   |*GND*   |
+-----+--------+--------+
| B15 | X0D24  | X0D35  |
+-----+--------+--------+
| B16 |*GND*   |*RST_N* |
+-----+--------+--------+
| B17 | X0D38  | X0D40  |
+-----+--------+--------+
| B18 | X0D39  | X0D41  |
+-----+--------+--------+

CIRCLE                
++++++
+-----+--------+--------+
| PIN | SIDE B | SIDE A |
+=====+========+========+
| B1  | NC     | NC     |
+-----+--------+--------+
| B2  | X1D0   |*5V*    |
+-----+--------+--------+
| B3  |*GND*   | X1D12  |
+-----+--------+--------+
| B4  | X1D11  | X1D23  |
+-----+--------+--------+
| B5  |*3V3*   |*GND*   |
+-----+--------+--------+
| B6  | X1D26  | X1D32  |
+-----+--------+--------+
| B7  | X1D27  | X1D33  |
+-----+--------+--------+
| B8  |*GND*   | X1D25  |
+-----+--------+--------+
| B9  | X1D28  | X1D30  |
+-----+--------+--------+
| B10 | X1D34  |*GND*   |
+-----+--------+--------+
| B11 | X1D29  | X1D31  |
+-----+--------+--------+
|**MECHANICAL KEY**     |
+-----+--------+--------+
| B12 | X1D36  | NC     |
+-----+--------+--------+
| B13 | X1D37  | NC     |
+-----+--------+--------+
| B14 |*CLK*   |*GND*   |
+-----+--------+--------+
| B15 | X1D24  | X1D35  |
+-----+--------+--------+
| B16 |*GND*   |*RST_N* |
+-----+--------+--------+
| B17 | X1D38  | NC     |
+-----+--------+--------+
| B18 | X1D39  | NC     |
+-----+--------+--------+
